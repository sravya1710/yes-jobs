<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Application Form</title>
    <link rel="stylesheet" type="text/css" href="/style">

</head>
<body>

    <h1>Job Application Form</h1>
    <div class="applynow" ALIGN="center">
    <form id="applicationForm" action="/apply-now" method="POST">
        <input type="hidden" id="jobId" name="jobId"> <!-- Hidden input field for jobId -->
        
        <label for="resumeLink">Resume/CV Link:</label><br>
        <input type="text" id="resumeLink" name="resumeLink" required><br><br>

        <label for="fullName">Full Name:</label><br>
        <input type="text" id="fullName" name="fullName" required><br><br>

        <label for="phoneNumber">Phone Number:</label><br>
        <input type="tel" id="phoneNumber" name="phoneNumber" required><br><br>

        <label for="address">Address:</label><br>
        <input id="address" name="address" required><br><br>

        <label for="date">Date of Application:</label><br>
        <input type="date" id="date" name="date" required><br><br>

        <label for="experience">Years of Relevant Experience:</label><br>
        <input type="number" id="experience" name="experience" required><br><br>

        <label for="salary">Expected Salary:</label><br>
        <input type="number" id="salary" name="salary" required><br><br>

        <button type="submit" id="addButton" class="button1">Submit Application</button>
    </form>
</div>
    <script>
        document.getElementById('applicationForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const jobId = document.getElementById('jobId').value;
            const resumeLink = document.getElementById('resumeLink').value;
            const fullName = document.getElementById('fullName').value;
            const phoneNumber = document.getElementById('phoneNumber').value;
            const address = document.getElementById('address').value;
            const date = document.getElementById('date').value;
            const experience = document.getElementById('experience').value;
            const salary = document.getElementById('salary').value;

            try {
                const response = await fetch('', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                       
                        resumeLink,
                        fullName,
                        phoneNumber,
                        address,
                        date,
                        experience,
                        salary
                    })
                });

            
    if (response.ok) {
            window.location.href = '/success.html'; // Redirect to success page
        
    } else {
        throw new Error('Invalid response status: ' + response.status);
    }
} catch (error) {
    console.error('Error submitting application:', error);
    alert('Error submitting application. Please try again.');
}
        });

    // Populate jobId from URL parameter if provided
    const urlParams = new URLSearchParams(window.location.search);
        const jobId = urlParams.get('jobId');

        // Set the jobId value in the hidden input field
        document.getElementById('jobId').value = jobId;

</script>
</body>
</html>